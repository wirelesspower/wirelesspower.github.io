<!DOCTYPE html>
<html>
  <head>
    <title>Fundamentals of Inductive Power Transfer</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { 
        font-family: 'Droid Serif'; 
        line-height: 1.6;
        }

      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: bold;
        color: #00467F;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }

      .TitleAuthor {
        color:white; 
        font-weight: normal;
      }

      .title-slide .remark-slide-number {
        display: none;
      }
      .title-slide h1, h2, h3, h4 {
        text-align: left;
        color:white;
        line-height: 0.7;
        font-weight: bold;
      }

      .title-slide {
        vertical-align: middle;
        background-color: #00467F;
      }

      .logo-title {
        content: "";
        position: absolute;
        top: 15px;
        right:   15px;
        height: 88px;
        width: 267px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url(https://cdn.auckland.ac.nz/assets/central/central-services/mediaandmarketing/uoa-logos-2015/uoa-logo-2015-reverse.png);
      }
      .logo-slide {
        content: "";
        position: absolute;
        top: 35px;
        right:   15px;
        height: 96px;
        width: 100px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url(https://cpb-ap-se2.wpmucdn.com/blogs.auckland.ac.nz/dist/d/79/files/2015/10/uoa-v-colour2.png);
      }

      .left-column {
        width: 65%;
        float: left;
        word-wrap: break-word;
      }
     
      .right-column {
        width: 30%;
        float: right;
        word-wrap: break-word;
      }

      .footer {
        content: "";
        position: absolute;
        bottom: 17px;
        color:gray;
        font-size: 10pt;
      }
      
      @page {
        size: 1210px 681px;
        margin: 0;
      }

      @media print {
        .remark-slide-scaler {
          width: 100% !important;
          height: 100% !important;
          transform: scale(1) !important;
          top: 0 !important;
          left: 0 !important;
        }
      }
      
      .zoom175 {
        transition: transform .2s; /* Animation */
      }

      .zoom175:hover {
        transform: scale(1.75) translateY(-20%) translateX(-20%); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
      }

    </style>

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <style>
    .smaller-font { font-size:14px } 
    </style>

    <!-- KaTeX and Mathjax support refer to below for syntax -->
    <!-- https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css" integrity="sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ" crossorigin="anonymous">
    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js" integrity="sha384-2BKqo+exmr9su6dir+qCw08N2ZKRucY4PrGQPPWU1A7FtlCGjmEGFqXCv5nyM5Ij" crossorigin="anonymous"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    
    <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

  </head>
  <body>
    <textarea id="source">

class: title-slide
count: false
.logo-title[]

# Fundamentals of Inductive Power Transfer
### A Workshop with Example Designs

.TitleAuthor[Duleepa J Thrimawithana]

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S1

# New Zealand

.center[<iframe width="975" height="430" src="https://www.youtube.com/embed/fHCemviY06Y?modestbranding=0&autohide=1&controls=0&playsinline=0&autoplay=0" frameborder="50" allow="encrypted-media" allowfullscreen></iframe>]

---
name: S2

# The University of Auckland

- Highest ranked New Zealand university and 85th in the QS World University Ranking
- Over 5,000 staff members and 40,000 students
- Nine faculties including Medical & Health Sciences, Engineering, Business & Economics and Science

.center[<img src="img/intro/UoAMap.png" height="300">]

---
name: S3

# Dept. of Electrical, Computer & Software Eng.

.left-column[
- One of the 5 deparments in the Faculty of Engineering
- Offers 3 undergraduate degree programs
 - Electrical & Electronics, Computer Systems and Software
 - Project based teaching
- 35+ full-time academic staff members and 15+ post-doctoral research fellows
- 150+ postgraduate students and 600+ undergraduate students
- Regular visiting research scholars and research students
- Research groups include Power Electronics, Power Systems, Signal Processing, Robotics, Embedded Systems, Parallel Computing, Telecommunications and Control Systems
]

.right-column[
<img src="img/intro/UoAEng.png" width="300px">
]
---
name: S4

# Power Electronics Research Group

.center[<img src="img/intro/PEGROUP.gif" height="430">]


---

class: title-slide
layout: false
count: false
.logo-title[]

# Part I - Fundamental Concepts
### Modelling the Coils and Power Transfer

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S5

# Wireless Power Transfer

- Can be divided in to two broad categories
- Radiative transmission through far-field principles
 - Examples include power transfer through radio-frequency, microwave, optical and ultrasonic technologies
 - At an experimental stage of development
 - Start-up companies such as ubeam, energous, WI-Charge, etc. are working in this space
 - AirFuel Alliance is developing standards
- Non-radiative transmission through near-field principles
 - Inductive power transfer (IPT) and capacitive power transfer (CPT) technologies are utilised
 - IPT is the most mature technology as it has been used in industrial applications since the 90s
 - A number of companies such as Daifuku, Conductix Wampfler, Apple, WitriCity, Bombardier, Wave IPT etc. are working in this space
 - WPC, SAE, etc. standards are being developed

---
name: S6

# IPT Applications

- Factory automation and materials handling
 - Includes hoists, AGVs and clean room systems  
- Consumer electronics and appliances
 - Charging phones, laptops, etc. as well as powering appliances 
- Transportation electrification 
 - Charging stationary and in-motion electric vehicles, charging electric ferries, etc.
- Biomedical
 - Charging and powering medical devices as well as implants
- Lighting and industrial applications  
 - Provides wireless power and communication to applications such as tunnel lighting, mining, industrial machinery, robots, etc. 

---
name: S7

# Components of an IPT System


.center[<img src="img/fund/IPTConcSys.png" height="150px">]

- Primary consists of a DC-AC switched-mode converter, a compensation network and a transmitter coil(s) 
 - A lumped transmitter coil is often referred to as a primary pad/coil/coupler 
 - An elongated coil is often called a primary track
 - Can be directly fed by a DC source or through a grid-connected AC-DC converter
- Secondary/pick-up consists of a receiver coil(s), a compensation network and an AC-DC converter
 - The reciever coil is is often referred to as a secondary/pick-up pad/coil/coupler
- Primary and pick-up coils are magnetically coupled but the coupling coefficient is typically less than 40%
- The compensation networks help improve efficiency by minimizing the VA requirements of converters

---
name: S8

# Current Status

- Uni or bi-directional power flow
 - Primary may use a full-bridge, half-bridge, push-pull, multi-level or matrix based converter topology
 - Pick-up may use a boost, buck, full-bridge, half-bridge or push-pull topology
 - Control techniques that facilitate ZVS/ZCS over a wide range of conditions
 - Compensation for both sides is provided through series, parallel or a combination of series-parallel tuned networks
- Power ratings up to tens of kWs
 - Magnetic designs include circular coil, solenoidal coil, polarised coil, multi coil structures as well as track based systems 
 - Ferrites and/or reflection coils are often used to shape the magnetic fields generated
 - Transmission range of over 400 mm with over Â± 200 mm XY tolerance
 - Efficiency typically over 85% but can be as high as 97%
 - Operating frequency typically ranges from tens of kHz to tens of MHz

---
name: S9

# Modelling the Primary and Pick-up Coils

.center[<img src="img/fund/TxEq.png" height="140px">]

- The behaviour of the coils can be modelled using a T-equivelent transformer model
 - `\(L_{pt}\)` and `\(L_{st}\)` are the self-inductances of primary and pick-up coils, respectively
 - `\(\phi_{m}\)` represents flux linkage while `\(\phi_{lk_p}\)` and `\(\phi_{lk_s}\)` represent leakage flux
 - The coupling coefficient, k, between the coils is less than 0.4 in a typical IPT system
- The mutual inductance, M, between the two coils is given by 
\\[M = k\sqrt{L\_{pt}L\_{st}}\\]
- The turns ratio, n, is related to the self-inductances of the coils since,  `\(n = \frac{N_{pt}}{N_{st}} = \sqrt{\frac{L_{pt}}{L_{st}}}\)`

---
name: S10

# Measuring Self-inductance 

.center[<img src="img/fund/OcTst.png" height="140px">]

- The self-inductance of primary coil is obtained by measuring inductance seen from primary when the pick-up coil is open-circuited since 
\\[L\_{pt(oc)} = (1-k)L\_{pt}+kL\_{pt}=L\_{pt}\\]
- The self-inductance of pick-up coil can also be measured similarly
- Depending on the construction of the coils, the self-inductance may change with changes in relative displacement between the coils


---
name: S11

# Measuring Coupling Coefficient

.center[<img src="img/fund/ScTst.png" height="140px">]

- The inductance seen from primary when pick-up coil is short-circuited is related to `\(L_{pt}\)` and `\(k\)` as given by 
\\[L\_{pt(sc)} = (1-k)L\_{pt}+\frac{k(1-k)L\_{pt}^2}{kL\_{pt}+(1-k)L\_{pt}} = (1-k^2)L\_{pt}\\]
- The coupling coefficient between the coils can be calculated from measured `\(L_{pt(oc)}\)` and `\(L_{pt(sc)}\)` using
\\[k = \sqrt{\frac{L\_{pt(oc)}-L\_{pt(sc)}}{L\_{pt(oc)}}}\\]

---
name: S12

# Coupled Inductor Model

.center[<img src="img/fund/CpldL.png" height="135px">]

- Although a T equivalent transformer model can be used to model the coils, the coupled inductor model is widely used when analysing an IPT system in the phasor-domain
- In the coupled inductor model, `\(L_{pt}\)` and `\(L_{st}\)` represent the self-inductances of primary and pick-up coils
- `\(V_{sr}\)` represents voltage induced across `\(L_{st}\)` due to current `\(I_{pt}\angle 0\)` flowing through `\(L_{pt}\)` and is given by
\\[V\_{sr} = \omega MI\_{pt}e^{j\pi/2}\\]
- Similarly, `\(V_{pr}\)` represents voltage induced across `\(L_{pt}\)` due to `\(I_{st}\angle\theta\)` and is given by
\\[V\_{pr} = \omega MI\_{st}e^{j(\theta+\pi/2)}\\]

???

If the current through primary coil is `\(I_{pt} \sin (\omega t)\)` then,
\\[\phi\_{m} \propto I\_{pt} \sin (\omega t) \\]
The voltage induced on the pick-up coil is therefore,
\\[v\_{sr} \propto \frac{\mathrm{d} \phi\_{m} }{\mathrm{d} t} \\]
\\[v\_{sr} \propto \omega I\_{pt} \cos (\omega t) \\]
Since `\(M\)` represent the coupling between the two coils,
\\[v\_{sr} = \omega M I\_{pt} \cos (\omega t) \\]
In the phasor-domain,
\\[V\_{sr} = \omega M I\_{pt} e^{j\pi/2} \\]

---
name: S13

# Open-Circuit Voltage & Short-Circuit Current

.left-column[
- The voltage measured across an open-circuited pick-up coil, `\(V_{oc}\)`, is the same as `\(V_{sr}\)` and therefore
\\[V\_{oc} = V\_{sr} = \omega MI\_{pt}e^{j\pi/2}\\]
- The current flowing through a short-circuited pick-up coil, `\(I_{sc}\)`, is 
\\[I\_{sc} = \frac{V\_{sr}}{j\omega L\_{st}} = I\_{pt}\frac{M}{L\_{st}}\\]
- The uncompensated volt-ampere (VA) capacity of the pick-up coil can be given by
\\[S\_{u} = \left | V\_{oc} \right | \left | I\_{sc} \right | = I\_{pt}^2\frac{\omega M^2}{L\_{st}}\\]
]

.right-column[.right[
<img src="img/fund/VocIsc.png" width="310px">
]]

---
name: S14

# Power Transferred Across Airgap

.left-column[
- Assume that the `\(V_{sr}\)` induced by `\(I_{pt}\angle 0\)` causes a current `\(I_{st}\angle\theta\)` to flow through a load, `\(Z_{sc}\)`, attached across the pick-up coil 
- Under these conditions, power transferred across the airgap can be given by
\\[P\_{o} = \Re \left \\{ V\_{sr}I\_{st}e^{-j(\theta)} \right \\} = \left | V\_{sr} \right | \left | I\_{st} \right | \cos(\pi/2-\theta)\\]
- The VA rating of the coils required to achieve this is
\\[\mathit{VA}\_{pt} = \omega L\_{pt} \left | I\_{pt} \right |^2 \quad \text{and} \quad \mathit{VA}\_{st} = \omega L\_{st} \left | I\_{st} \right |^2 \\]
- Thus `\(P_{o}\)` is related to the VA in the coils as given by
\\[P\_{o} = k \sqrt{\mathit{VA}\_{pt}\mathit{VA}\_{st}} \sin(\theta) \\]

]

.right-column[.right[
<img src="img/fund/GenP.png" width="310px">
]]

???

Note that 
\\[P\_{o} = \Re \left \\{ V\_{sr} \bar {I\_{st}} \right \\} \\]
Substituting `\( \left| V_{sr} \right | = \omega M \left| I_{pt} \right | \)`, 
\\[P\_{o} = \omega M \left | I\_{pt} \right | \left | I\_{st} \right | \cos(\pi/2-\theta)\\]
\\[P\_{o} = k\sqrt{ (\omega L\_{pt} \left | I\_{pt} \right |^2 ) (\omega L\_{st} \left | I\_{st} \right |^2) } \sin(\theta)\\]
\\[P\_{o} = k \sqrt{\mathit{VA}\_{pt}\mathit{VA}\_{st}} \sin(\theta) \\]

---
name: S15

# Coil Q & Losses

- Assume that the losses in `\(L_{pt}\)` and `\(L_{st}\)` are modelled using equivelent series resistances (ESRs) `\(r_{pt}\)` and `\(r_{st}\)`
- The quality factors, `\(Q_{pt}\)` and `\(Q_{st}\)`, of the primary and pick-up coils are
\\[Q\_{pt} =  {\omega L\_{pt}}/{r\_{pt}} \quad \text{and} \quad Q\_{st} = {\omega L\_{st}} / {r\_{st}} \\]
- The total losses in the two coils can be expressed as
\\[P\_{loss(c)} = \left | I\_{pt}^2 \right | r\_{pt} + \left | I\_{st}^2 \right | r\_{st} = \frac{\mathit{VA}\_{pt}}{Q\_{pt}} + \frac{\mathit{VA}\_{st}}{Q\_{st}}\\]
- Since `\(P_{o} = k \sqrt{\mathit{VA}_{pt}\mathit{VA}_{st}} \sin(\theta) \)`, `\(P_{loss(c)}\)` can be expressed as
\\[P\_{loss(c)} = \frac{\mathit{VA}\_{pt}}{Q\_{pt}} + \frac{P\_{o}^2}{\mathit{VA}\_{pt} k^2 Q\_{st} \sin(\theta)^2}\\]

---
name: S16

# Maximum Coil-Coil Efficiency

- Taking the derivative of `\(P_{loss(c)}\)`, conditions to achieve minimum loss can be derived as
\\[ \mathit{VA}\_{pt} = \frac {P\_{o}} {k \sin(\theta)} \sqrt { \frac {Q\_{pt}} {Q\_{st}} } \quad \text{or} \quad \mathit{VA}\_{pt} = \frac {Q\_{pt}} {Q\_{st}} \mathit{VA}\_{st} \\]
- Under above conditions losses in `\(L_{pt}\)` and `\(L_{st}\)` are a minimum and can be given by
\\[ P\_{loss(c)\_{min}} = \frac {2 P\_{o}} {k \sin(\theta)} \frac {1} {\sqrt {Q\_{pt} Q\_{st}} } \\]
- Thus, the maximum coil-coil power transfer efficiency can be derived as
\\[ \eta\_{c\_{max}} = \frac{ k \sin(\theta) -  \frac {1} { \sqrt {Q\_{pt} Q\_{st}} }} {k \sin(\theta) +  \frac {1} {\sqrt {Q\_{pt} Q\_{st}} }} \\]

---
name: S17

# Example: Simulating the Coils

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)` (measured when the other coil is open circuited). The primary coil measured `\(18.5427 \mu H\)` when the pick-up coil was short-circuited. The primary coil of the IPT system is driven by the primary power supply through a compensation network to maintain a `\(85 kHz\)`, `\(10 A_{rms}\)` current. 

.left-column[
- Show that the `\(k\)` between the two coils is 0.1
- Develop a simulation model on LTSpice 
- With the aid of this model show that `\(V_{oc}=10V_{rms}\)` and `\(I_{sc}=1A_{rms}\)`
- Show that the coils can be modelled using the inductance matrix
\\[ \begin{bmatrix} L\_{pt} & M \\\ M & L\_{st} \end{bmatrix} = \begin{bmatrix} 18.73 & 1.873 \\\ 1.873 & 18.73 \end{bmatrix} \mu H \\]
]

.right-column[
.center[<img src="img/fund/EgVocIsc.png" width="300px">]
]

---

class: title-slide
layout: false
count: false
.logo-title[]

# Part II - Coil Structures
### Field Patterns and Coil Parameters

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S18

# Types of Coil Structures

.center[<img src="img/coils/CoilGen.png" height="150px">]

- Can be broadly divided into ditributed track type coil structures and lumped coil structures
- Typically, ferrites are used to help shape the field generated 
 - Maximize coupling, minimize leakage and improve coil Q
- As an alternative for ferrites, energised or passive field shapping coils can be used
- Lumped coil structures can be further divided as non-polarised, polarised and multi-coil structures
- Multi-coil structures typically employ multiple decoupled coils 
 - Each coil can be driven seperately to create the desired field pattern
- Repeater coils can be used to extend the range 

---
name: S19

# Construction of a Lumped Coil

.left-column[
- Contructed as planar spiral winding and take the shape of a circle/square/rectangle/etc.
 - Multifilar windings can be used to increase the current rating, but special attention is required to ensure current sharing 
- High-frequency Litz wire is used to improve coil Q
 - Need to ensure that the windings are appropriately isolated 
- Ferrite plates/disks/bars are used to create a single sided flux pattern 
- The housing that provides electrical isolation holds the Litz wire and the ferrites 
 - Typically the windings and ferrites are potted 
- Aluminum shielding is used to reduce leakage flux
]

.right-column[
.center[<img src="img/coils/Construction.png" width="240px">]
]

---
name: S20

# Non-Polarised Coils

.left-column[
- The single sided magnetic field distribution is from centre to edge of the coil
- Typically used to transfer power over a gap that is roughly equivalent to one quarter of the coil diameter
- Changes in the displacement between the primary and pick-up coils causes
 - Changes to `\(k\)` between the coils 
 - Changes to `\(L_{pt}\)` and `\(L_{st}\)` of the coils
- With lateral/longitudinal displacement `\(k\)` will drop to 0
 - The point at which `\(k\)` drops to 0 is referred to as the decoupled position of the coils
 - A negative `\(k\)` after the decoupled position indicates a `\(180^0\)` phase-shift in induced voltage
]

.right-column[
<img src="img/coils/CircCoil.png" width="290px">
]

---
name: S21

# DD Type Polarised Coils

.left-column[
- The single sided magnetic field distribution is from one end to the other end of the coil
- Typically used to transfer power over a gap that is roughly equivalent to one half of the coil length
- Flux-pipe formed by the two coils at the center of the pad should be as large as possible
- Changes in the displacement between the primary and pick-up coils causes
 - Changes to `\(k\)` between the coils 
 - Changes to `\(L_{pt}\)` and `\(L_{st}\)` of the coils
- With longitudinal (x) displacement `\(k\)` will drop to 0
 - At the point at which `\(k\)` drops to 0, primary and pick-up DD coils are decoupled
]

.right-column[
.center[<img src="img/coils/DDCoil.png" width="340px">]
]

---
name: S22

# Multi Coil Structures


.center[<img src="img/coils/MultiCoil.png" height="150px">]

- DDQ structure is one of the most common multi-coil structures
 - The quadrature (Q) winding is decoupled from the DD winding
 - Thus, both windings can be used independently to transfer power
 - A DD primary and DDQ secondary provides wide spatial tolerance since the Q winding helps transferring power when `\(k\)` between the DD windings drop
- Bi-polar structure employs two overlapping windings that are decoupled from each other
 - When used as a transmitter, each coil can be driven at a desired magnitude and a phase
- Tri-polar and other multi-coil structures typically employ decoupled overlapping windings

---
name: S23

# Demo: Simulating and Constructing a DD Coil

<br></br>
.center[<img src="img/coils/Demo.png" height="300px">]

---

class: title-slide
layout: false
count: false
.logo-title[]

# Part III - Compensating the Pick-Up Coil
### Analysing the Behaviour of a Pick-up

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S24

# An Uncompensated Pick-up

.center[<img src="img/comp/UncompR.png" height="135px">]

- Assume a load resistor, `\(R_{L}\)`, is connected directly across a pick-up coil, which is coupled to a primary coil 
- The primary coil is driven by the primary converter generating a current `\(I_{pt}\angle 0\)` at an angular frequency `\(\omega = 2\pi f\)`
- The current flowing through pick-up coil as well as the load will be
\\[ I\_{st} = \frac {-V\_{sr}} {R\_{L} + j\omega L\_{st}} = \frac {-\omega MI\_{pt}e^{j\pi/2}} {R\_{L} + j\omega L\_{st}}  \\]


---
name: S25

# Power from an Uncompensated Pick-up

.left-column[
- The power delivered to the load is then
\\[ P\_{o} =  \left | I\_{st} \right |^2 R\_{L} = \left ( \omega MI\_{pt} \right )^2  \frac {R\_{L}} {R\_{L}^2 + \omega^2 L\_{st}^2 } = k^2 \mathit{VA}\_{pt} \frac {\omega L\_{st} / R\_{L}} { 1 + \omega^2 L\_{st}^2 / R\_{L}^2 } \\]
- At a load `\(R_L = \omega L_{st}\)`, maximum power is delivered 
\\[ P\_{o\_{(max)}} =  \frac {\left ( \omega MI\_{pt} \right )^2} {2 \omega L\_{st} } = 0.5 V\_{oc}I\_{sc}  = 0.5k^2\mathit{VA}\_{pt} \\]
- As an example, when `\(k = 0.1\)`, to deliver 5 mW to the load, the primary coil should be driven atleast at 1 VA
 - The impedance of `\(L_{st}\)` limits the power transfer
]

.right-column[.right[
<img src="img/comp/PUncompR.png" width="310px">
]]

---
name: S26

# A Series Compensated Pick-up

.center[<img src="img/comp/SCompR.png" height="135px">]

- The impedance of `\(L_{st}\)` can be compensated using the capacitor `\(C_{st}\)` that is connected in series with `\(L_{st}\)`
- To allow the pick-up to behave like an ideal voltage source, at a given `\(\omega\)`, `\(C_{st}\)` can be selected such that 
\\[ \omega L\_{st} = \frac {1} {\omega C\_{st}} \quad \text{or} \quad \omega =  \frac {1} { \sqrt {L\_{st}C\_{st}} } \\]
- The impedance of the compensated pick-up, including `\(R_{L}\)`, seen from `\(V_{sr}\)` is given by
\\[ Z\_{s} = j \left ( \omega L\_{st} - \frac {1} {\omega C\_{st}} \right ) + R\_{L} = j \Delta \omega L\_{st} + R\_{L} \quad \text{when} \quad L\_{st} \rightarrow (1 + \Delta) L\_{st} \\]


---
name: S27

# Power Transfer with Series Compensation

.left-column[
- Assuming `\( L_{st} \rightarrow (1+\Delta) L_{st} \)` to account for detuning introduced by changes to `\(L_{st} \)`, output power can be obtained as
\\[ P\_{o} =  \frac {\left ( \omega MI\_{pt} \right )^2 R\_{L}} { \Delta^2 \omega^2 L\_{st}^2  + R\_{L}^2 }  = k^2 \mathit{VA}\_{pt} \frac {(1+ \Delta) \omega L\_{st} / R\_{L}} { 1 + \Delta^2 \omega^2 L\_{st}^2 / R\_{L}^2 } \\]
- If perfectly tuned (i.e. `\(\Delta = 0\)`) output power increases with `\(1/R_L\)`
\\[ P\_{o} =  \frac {\left ( \omega MI\_{pt} \right )^2 } { R\_{L} }  = k^2 \mathit{VA}\_{pt} \frac {\omega L\_{st}} {R\_{L} } \\]
- When detuned (i.e. `\(\Delta \neq 0\)`) maximum output power is limited to 
\\[ P\_{o\_{(max)}} =  \frac {\left ( \omega MI\_{pt} \right )^2 } { 2 \Delta \omega L\_{st} }  = k^2 \mathit{VA}\_{pt} \frac {1+ \Delta} {2 \Delta } \quad \text{at} \quad R\_{L} = \Delta \omega L\_{st}\\]
]

.right-column[.right[
<img src="img/comp/PScompR.png" width="310px">
]]

---
name: S28

# Example: Series Compensated Pick-up

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(10 A_{rms}\)` current. The pick-up uses series compensation and powers a `\(2 \Omega \)` AC load.

.left-column[
- Show that `\(C_{st}\)` has to be `\(187.2 nH\)` to compensate `\(L_{st}\)`
- Show that `\(\mathit{VA}_{pt}=1kVA\)`
- Develop a simulation model in LTSpice 
- With the aid of this model show that 
 - `\(P_{o}=50W\)`
 - Output power drops to `\(30W\)` if `\(L_{st}\)` increases by 20%
]

.right-column[
.center[<img src="img/comp/EgSComp.png" width="300px">]
]

---
name: S29

# A Parallel Compensated Pick-up (P-I)

.center[<img src="img/comp/PCompRN.png" height="135px">]

- The impedance of `\(L_{st}\)` is compensated using the capacitor `\(C_{st}\)` that is connected in parallel with `\(L_{st}\)`
- The impedance of the compensated pick-up, including `\(R_{L}\)`, as seen from `\(V_{sr}\)` is given by
\\[ Z\_{s} = j \left [ \omega L\_{st} - \frac {1} {\omega C\_{st}} \left ( \frac {\omega^2 C\_{st}^2 R\_{L}^2 } {1+\omega^2 C\_{st}^2 R\_{L}^2} \right ) \right ] + \frac {R\_{L}} {1+\omega^2 C\_{st}^2 R\_{L}^2} \\]
- Unlike in a series compensated pick-up, `\(Z_{s}\)` can only be real at a specific `\(R_{L}\)` while under all other conditions it will be reactive 
- Norton tranformation can be used to obtain a simplified model, where [`\(I_{sc} = V_{sr} / j \omega L_{st} \)`](#S13)

---
name: S30

# A Parallel Compensated Pick-up (P-II)

.center[<img src="img/comp/PCompRI.png" height="135px">]

- To allow the pick-up to behave like an ideal current source, at a given `\(\omega\)`, `\(C_{st}\)` can be selected such that 
\\[ \omega L\_{st} = \frac {1} {\omega C\_{st}} \quad \text{or} \quad \omega =  \frac {1} { \sqrt {L\_{st}C\_{st}} } \\]
- To highlight the impact of detuning, assuming `\( L_{st} \rightarrow (1+\Delta) L_{st} \)`, `\(Z_{s}\)` can be written in the form
\\[ Z\_{s} = j \omega L\_{st} \left [  \frac { \left ( 1 + \Delta \right ) + \Delta \left ( \frac {R\_L} {\omega L\_{st}} \right)^2 } {1 + \left ( \frac {R\_L} {\omega L\_{st}} \right)^2} \right ] + \frac {R\_L } { 1 + \left ( \frac {R\_L} {\omega L\_{st}} \right)^2} \\]


---
name: S31

# Power Transfer with Parallel Compensation

.left-column[
- Assuming `\( L_{st} \rightarrow (1+\Delta) L_{st} \)`, output power can be obtained as
\\[ P\_{o} =  \frac {\left ( \omega MI\_{pt} \right )^2 R\_{L}} { \left( 1+\Delta \right)^2 \omega^2 L\_{st}^2  + \Delta^2 {} R\_{L}^2 }  = k^2 \mathit{VA}\_{pt} \frac { \frac {1} { 1+\Delta } R\_{L} / \omega L\_{st}} { 1 + \frac {\Delta^2} {\left( 1+\Delta \right)^2} R\_{L}^2 / \omega^2 L\_{st}^2 } \\]
- If perfectly tuned (i.e. `\(\Delta = 0\)`) output power increases with `\(R_L\)`
\\[ P\_{o} =  \frac {\left ( \omega MI\_{pt} \right )^2 R\_{L} } { \omega^2 L\_{st}^2 }  = k^2 \mathit{VA}\_{pt} \frac {R\_{L} } {\omega L\_{st}} \\]
- When detuned (i.e. `\(\Delta \neq 0\)`) maximum output power is limited to 
\\[ P\_{o\_{(max)}} =  \frac {\left ( \omega MI\_{pt} \right )^2 } { 2 \Delta (1 + \Delta) \omega L\_{st}}  =  \frac {k^2 \mathit{VA}\_{pt}} {2 \Delta} \quad \text{at} \quad R\_{L} = \omega L\_{st} \frac {1+\Delta} {\Delta}\\]
]

.right-column[.right[
<img src="img/comp/PPcompR.png" width="310px">
]]

---
name: S32

# Example: Parallel Compensated Pick-up

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(10 A_{rms}\)` current. The pick-up uses parallel compensation and powers a `\(50 \Omega \)` AC load.

.left-column[
- Show that `\(C_{st}\)` has to be `\(187.2 nF\)` to compensate `\(L_{st}\)`
- Show that `\(\mathit{VA}_{pt}=1kVA\)`
- Develop a simulation model in LTSpice 
- With the aid of this model show that 
 - `\(P_{o}=50W\)`
 - Output power drops to `\(24.6W\)` if `\(L_{st}\)` increases by 20%
]

.right-column[
.center[<img src="img/comp/EgPComp.png" width="300px">]
]

---
name: S33

# An LCL Compensated Pick-up

.center[<img src="img/comp/LCLCompR.png" height="135px">]

- The impedance of `\(L_{st}\)` is compensated using the capacitor `\(C_{st}\)` and the inductor `\(L_{si}\)`
- The impedance of the compensated pick-up, including `\(R_{L}\)`, seen from `\(V_{sr}\)` is given by
\\[ Z\_{s} = j \omega L\_{st} + \frac {R\_{L} + j \omega L\_{si}} { (1 - \omega^2 L\_{si} C\_{st} ) + j \omega R\_{L} C\_{st} } \\]
- Typically, `\(C_{st}\)` and `\(L_{si}\)` are chosen such that `\( \omega L_{si} = 1/ \omega C_{st} \)`, thus, `\(Z_{s}\)` simplifies to 
\\[ Z\_{s} = j \omega L\_{st} + \frac {1} {j \omega C\_{st}} + \frac {\omega^2 L\_{si}^2} {R\_{L}} = j \Delta \omega L\_{st} + \frac {\omega^2 L\_{si}^2} {R\_{L}} \\]

---
name: S34

# Power Transfer with LCL Compensation

.left-column[
- Assuming `\( \omega L_{st} \rightarrow (1+\Delta) \omega L_{st} \)`, output power can be given by
\\[ P\_{o} =  k^2 \mathit{VA}\_{pt} \frac { \frac {1} { 1+\Delta } R\_{L} / \omega L\_{st}} { \left( 1 - \frac {\Delta} {1+\Delta} \frac {L\_{si}} {L\_{st}} \right)^2 + \frac {\Delta^2} {\left( 1+\Delta \right)^2} R\_{L}^2 / \omega^2 L\_{st}^2 } \\]
- If perfectly tuned (i.e. `\(\Delta = 0\)`) output power increases with `\(R_L\)`
\\[ P\_{o} =  \frac {\left ( \omega MI\_{pt} \right )^2 R\_{L} } { \omega^2 L\_{st}^2 }  = k^2 \mathit{VA}\_{pt} \frac {R\_{L} } {\omega L\_{st}} \\]
- When detuned (i.e. `\(\Delta \neq 0\)`) maximum output power is limited to 
\\[ P\_{o\_{(max)}} = \frac {k^2 \mathit{VA}\_{pt}} {2 \Delta \left( 1- \frac { \Delta } {1+\Delta} \frac { L\_{si}} {L\_{st}} \right) } \quad \text{at} \quad R\_{L} = \omega L\_{st} \left[ \frac {1+\Delta} {\Delta} - \frac { L\_{si}} {L\_{st}} \right] \\]
]

.right-column[.right[
<img src="img/comp/PLCLcompR.png" width="310px">
]]

---
name: S35

# Example: LCL Compensated Pick-up

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(10 A_{rms}\)` current. The pick-up uses LCL compensation and power a `\(50 \Omega \)` AC load.

.left-column[
- Show that `\(C_{st}\)` has to be `\(187.2 nF\)` to compensate `\(L_{st}\)`
- Show that `\(L_{si}\)` ideally has to be `\(18.73 \mu H\)`
- Show that `\(\mathit{VA}_{pt}=1kVA\)`
- Develop a simulation model in LTSpice 
- With the aid of this model show that 
 - `\(P_{o}=50W\)`
 - Output power drops to `\(30W\)` if `\(L_{st}\)` increases by 20%
]

.right-column[
.center[<img src="img/comp/EgLCLComp.png" width="300px">]
]

---
name: S36

# Partial Series Compensation of Pick-up

.center[<img src="img/comp/PartialSCompR.png" height="135px">]

- At a given `\(k\)` and a primary excitation, `\(\mathit{VA_{pt}}\)`, the power transfered to the load of a parallel or LCL compensated pick-up is determined by `\(R_L/\omega L_{st}\)`
- If `\(R_L\)` is fixed by the design, then `\(L_{st}\)` can be partially compensated using `\(C_{si}\)`, to increase `\(\mathit{VA_{pt}}\)` by
 - Either reducing the effective `\(L_{st}\)` to increase `\(I_{st}\)` (specially if `\(L_{st}\)` is fixed)
 - Or increasing `\(L_{st}\)` and then partially compensating to lower `\(I_{st}\)` 
- The equivalent inductance of the partially compensated pick-up coil, which can be used to calculate `\(C_{st}\)` (and `\(L_{si}\)` in the case of an LCL compensated pick-up), is given by
\\[ L\_{st\_{{(eq)}}} = L\_{st} - 1/ \left(  \omega^2 C\_{si} \right)  \\]

---
name: S37

# Example: Partial Series Compensation

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(10 A_{rms}\)` current. The pick-up uses LCL compensation and power a `\(50 \Omega \)` AC load. Partial series compensation is used to deliver `\(100 W\)` to the load when operated under tuned conditions. 

.left-column[
- Show that `\(C_{si}\)` has to be `\(639.1 nF\)` to ensure `\(P_{o}=100W\)`
- Show that `\(C_{st}\)` has to be `\(264.7 nF\)` to compensate `\(L_{st_{(eq)}}\)`
- Show that `\(L_{si}\)` ideally has to be `\(13.24 \mu H\)` and `\(\mathit{VA}_{pt}=1kVA\)`
- Develop a simulation model in LTSpice and show that 
 - `\(P_{o}=100W\)`
 - Output power drops to `\(24W\)` if `\(L_{st}\)` increases by 20%
- Using LTSpice, show that a `\(37.46 \mu H\)` pick-up coil that is partially compensated down to `\(18.73 \mu H\)` would perform similar
]

.right-column[
.center[<img src="img/comp/EgPTLCLCompM1.png" width="275px">]
.center[<img src="img/comp/EgPTLCLCompM2.png" width="270px">]
]

---
name: S38

# Operating Quality Factor of a Pick-up

- `\(P_o\)` of a series compensated pick-up was proportional to `\(\omega L_{st}/R_L\)`, while for a parallel/LCL compensated pick-up `\(P_o\)` was proportional to `\(R_L/\omega L_{st}\)`
- The ratio `\(\omega L_{st}/R_L\)` or `\(R_L/\omega L_{st}\)`, is referred to as the operating quality factor of a pick-up and thus when operated at a load `\(R_L\)`, the operating quality factor of a series compensated pick-up, `\(Q_{ss_{(op)}}\)`, or the operating quality factor of a parallel/LCL compensated pick-up, `\(Q_{sp_{(op)}}\)`, can be given by
 \\[ Q\_{ss\_{{(op)}}} = \frac {\omega L\_{st} } {R\_L} \quad \text{or} \quad Q\_{sp\_{{(op)}}} = \frac {R\_L} {\omega L\_{st} } \\]
- A higher operating `\(Q\)` results in higher power but also makes the pick-up increasingly sensitive to changes
 - As an example, from previous analysis, if operated at a `\(Q_{ss_{(op)}}\)` of 5, a 20% change in `\(L_{st}\)` results in a 40% drop in `\(P_o\)`
 - Typically, an IPT system is designed to have an operating `\(Q\)` of less than 10 
- Note that `\(Q_{pt}\)` and `\(Q_{st}\)` are a measure of the coil quality and it is therefore desirable to for these to be much larger than the operating `\(Q\)` 

---

class: title-slide
layout: false
count: false
.logo-title[]

# Part IV - Primary Compensation Networks
### Analysing the Behaviour of an IPT System

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S39

# Reflected Impedance on to Primary

.center[<img src="img/netw/RefImp.png" height="135px">]

- The pick-up can be modelled as `\(V_{sr}\)` driving into `\(Z_s\)`, which models the pick-up compensation and the load
- Current flowing through the pick-up coil is therefore 
\\[ I\_{st} = -V\_{pr} / Z\_s = -j \omega M I\_{pt} / Z\_s \\]
- `\(I_{st}\)` induces a voltage, `\(V_{pr}\)`, across the primary coil, which can be given by
\\[ V\_{pr} = j \omega M I\_{st} = \omega^2 M^2 I\_{pt} / Z\_s \\]
- `\(V_{pr}\)` can also be represented as a reflected impedance where `\(Z_{pr} = \omega^2 M^2 / Z_s \)`

---
name: S40

# Primary Compensation Networks

.center[<img src="img/netw/PCompGen.png" height="135px">]

- Directly driving the highly inductive load consisting of `\(L_{st}\)` and `\(Z_{pr}\)` with a power converter can be very inefficient and costly
 - For example the VA rating of the converter, which is required to deliver `\(1W\)` to the pick-up load, can be in excess of [`\(1/(k^2Q_{ss/sp_{(op)}})\)`](#S38)
- Compensation networks are used to reduce the VA demand of the primary converter
- A series or an LCL compensation network is commonly employed if the primary is driven by a voltage source inverter  
- A parallel compensation network is commonly employed if the primary is driven by a current source inverter

---
name: S41

# A Series Compensated Primary (P-I)

.center[<img src="img/netw/SCompGen.png" height="135px">]

- The impedance of `\(L_{pt}\)` can be compensated using the capacitor `\(C_{pt}\)` that is connected in series with `\(L_{pt}\)`
- At a given operating `\(\omega\)` (i.e. fundamental of `\(V_{pi}\)`), `\(C_{pt}\)` can be selected to negate `\(L_{pt}\)` by ensuring
\\[ \omega L\_{pt} = \frac {1} {\omega C\_{pt}} \quad \text{or} \quad \omega =  \frac {1} { \sqrt {L\_{pt}C\_{pt}} } \\]
- The impedance of the compensated primary, including `\(Z_{pr}\)`, seen by the converter is given by
\\[ Z\_{p} = j \left ( \omega L\_{pt} - \frac {1} {\omega C\_{pt}} \right ) + Z\_{pr} = j \Delta\_p \omega L\_{pt} + \frac {\omega^2 M^2} {Z\_s} \quad \text{when} \quad L\_{pt} \rightarrow (1 + \Delta\_p) L\_{pt} \\]

---
name: S42

# A Series Compensated Primary (P-II)

.center[<img src="img/netw/SCompGen.png" height="135px">]

- When `\(C_{pt}\)` is designed to fully compensate `\(L_{pt}\)`, the primary converter drives an impedance
\\[ Z\_{p} = Z\_{pr} = \omega^2 M^2 / Z\_s \\]
- In a typical IPT system, the pick-up compensation network ensures that `\(Z_{s}\)` is mostly resistive 
 - For example, in an ideally series compensated pick-up, `\(Z_{s} = R_L\)`
- The primary converter and the primary coil currents are given by 
\\[ I\_{pi} = \frac {V\_{pi}} {Z\_p} = \frac {V\_{pi}} {j \Delta\_p \omega L\_{pt} + \omega^2 M^2 / Z\_s} = I\_{pt} \\]

---
name: S43

# Example: Series-Series Compensated System

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The primary uses series compensation and is energised using a sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up uses series compensation and deliver `\(50 W\)` to a `\(2 \Omega \)` AC load.

.left-column[
- Show that `\(C_{pt}\)` has to be `\(187.2 nF\)` to compensate `\(L_{pt}\)`
- Show that `\(V_{pi}\)` has to be `\(5 V_{rms}\)` to transfer `\(50 W\)`
- Develop a simulation model in LTSpice 
- With the aid of this model show that 
 - `\(P_{o}=50W\)`
 - `\(V_{pi}\)` and `\(I_{pi}\)` are in-phase
 - Removing the pick-up reflects a short-circuit across the primary converter
]

.right-column[
.center[<img src="img/netw/EgPSSSComp.png" width="300px">]
]

---
name: S44

# Example: Series-Parallel Compensated System

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The primary uses series compensation and is energised using a sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up uses parallel compensation and deliver `\(50 W\)` to a `\(50 \Omega \)` AC load.

.left-column[
- Show that `\(C_{pt}\)` has to be `\(187.2 nF\)` to compensate `\(L_{pt}\)`
- Show that `\(V_{pi}\)` has to be `\(\sim 5 V_{rms}\)` to transfer `\(50 W\)`
- Develop a simulation model in LTSpice 
- With the aid of this model show that 
 - `\(P_{o} \approx 50W\)`
 - `\(V_{pi}\)` sees a slightly capacitive load
 - Removing the pick-up reflects a short-circuit across the primary converter
]

.right-column[
.center[<img src="img/netw/EgPSSPComp.png" width="300px">]
]

---
name: S45

# An LCL Compensated Primary (P-I)

.center[<img src="img/netw/LCLCompGen.png" height="135px">]

- The impedance of `\(L_{pt}\)` is compensated using the capacitor `\(C_{pt}\)` and the inductor `\(L_{pi}\)`
- The impedance of the compensated primary, including `\(V_{pr}\)`, seen by the converter is given by
\\[ Z\_{p} = j \omega L\_{pi} - j \omega \frac { \left ( Z\_{pr}^2C\_{pt} - L\_{pt} \left( 1- \omega^2 L\_{pt}C\_{pt} \right) \right )} {\left( 1- \omega^2 L\_{pt}C\_{pt} \right)^2 + \omega^2 Z\_{pr}^2C\_{pt}^2 } + \frac { Z\_{pr} } {\left( 1- \omega^2 L\_{pt}C\_{pt} \right)^2 + \omega^2 Z\_{pr}^2C\_{pt}^2 } \\]
- The primary converter current can be given by
\\[ I\_{pi} = V\_{pi} / Z\_p  \\]

---
name: S46

# An LCL Compensated Primary (P-II)

.left-column[
- The primary coil current can be given by
\\[ I\_{pt} = \frac {V\_{pi}} {j \omega L\_{pi} + j \omega L\_{pt} (1 - \omega^2 L\_{pi} C\_{pt} ) + Z\_{pr} (1 - \omega^2 L\_{pi} C\_{pt} ) } \\]
- Typically, at a given operating `\(\omega\)` (i.e. fundamental of `\(V_{pi}\)`), `\(C_{pt}\)` and `\(L_{pi}\)` are chosen such that 
\\[ \omega L\_{pt} = \frac {1} {\omega C\_{pt}} = \omega L\_{pi} \quad \text{or} \quad \omega =  \frac {1} { \sqrt {L\_{pt}C\_{pt}} } =  \frac {1} { \sqrt {L\_{pi}C\_{pt}} } \\]
- Thus, when the LCL network uses matching impedances,
\\[ Z\_{p} = 1 / ( \omega^2 C\_{pt}^2 Z\_{pr} ) = \omega^2 L\_{pi}^2 \times Z\_s / ( \omega^2 M^2 )  \\]
\\[ I\_{pt} = V\_{pi} / j \omega L\_{pi}  \\]
]

.right-column[
.center[<img src="img/netw/LCLCompIdeal.png" width="200px">]
]

---
name: S47

# Example: LCL-Series Compensated System

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The primary uses LCL compensation and is energised using a sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up uses series compensation and deliver `\(50 W\)` to a `\(2 \Omega \)` AC load.

.left-column[
- Show that `\(C_{pt}\)` has to be `\(187.2 nF\)` and `\(L_{pi}\)` has to be `\(18.73 \mu H\)`
- Show that `\(V_{pi}\)` has to be `\(100 V_{rms}\)` to transfer `\(50 W\)`
- Develop a simulation model in LTSpice 
 - `\(L_{pi}\)` can be added a `\(50 m \Omega\)` ESR to help reach SS faster
- With the aid of this model show that 
 - `\(P_{o}=50W\)`
 - `\(V_{pi}\)` and `\(I_{pi}\)` are in-phase
]

.right-column[
.center[<img src="img/netw/EgPLCLSSComp.png" width="300px">]
]

---
name: S48

# Example: LCL-Parallel Compensated System

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The primary uses LCL compensation and is energised using a sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up uses parallel compensation and deliver `\(50 W\)` to a `\(50 \Omega \)` AC load.

.left-column[
- Show that `\(C_{pt}\)` has to be `\(187.2 nF\)` and `\(L_{pi}\)` has to be `\(18.73 \mu H\)`
- Show that `\(V_{pi}\)` has to be `\(\sim 100 V_{rms}\)` to transfer `\(50 W\)`
- Develop a simulation model in LTSpice 
 - `\(L_{pi}\)` can be added a `\(50 m \Omega\)` ESR to help reach SS faster
- With the aid of this model show that 
 - `\(P_{o} \approx 50W\)`
 - `\(V_{pi}\)` sees a slightly inductive load
]

.right-column[
.center[<img src="img/netw/EgPLCLSPComp.png" width="300px">]
]

---
name: S49

# Partial Series Compensation of Primary

.center[<img src="img/netw/PartialSCompP.png" height="135px">]

- The primary coil current and thus `\(\mathit{VA_{pt}}\)`, are both limited by `\(V_{pi}/\omega L_{pi}\)`
- If `\(V_{pi}\)` is fixed by the design, then `\(L_{pt}\)` can be partially compensated using `\(C_{pi}\)`, to increase `\(\mathit{VA_{pt}}\)` by
 - Either reducing the effective `\(L_{pt}\)` to increase `\(I_{pt}\)` (specially if `\(L_{pt}\)` is fixed)
 - Or increasing `\(L_{pt}\)` and then partially compensating to lower `\(I_{pt}\)` 
- The equivalent inductance of the partially compensated pick-up coil, which can be used to calculate `\(C_{pt}\)` and `\(L_{pi}\)`, is given by
\\[ L\_{pt\_{{(eq)}}} = L\_{pt} - 1/ \left(  \omega^2 C\_{pi} \right)  \\]

---
name: S50

# Example: Partially Compensated Primary

When placed `\(100 mm\)` apart the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The primary uses LCL compensation and is energised using a `\(50 V_{rms}\)` sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up uses parallel compensation and deliver `\(50 W\)` to a `\(50 \Omega \)` AC load.

.left-column[
- Show that `\(C_{pi}\)` has to be `\(374.4 nF\)` to ensure `\(I_{pt}=10A_{rms}\)`
- Show that `\(C_{st}\)` has to be `\(374.4 nF\)` 
- Develop a simulation model in LTSpice 
 - `\(L_{pi}\)` can be added a `\(50 m \Omega\)` ESR to help reach SS faster
- With the aid of this model show that 
 - `\(P_{o} \approx 50W\)`
- Using LTSpice, show that a `\(37.46 \mu H\)` primary coil that is partially compensated down to `\(13.24 \mu H\)` would deliver same `\(P_{o}\)`
]

.right-column[
.zoom175[
.center[<img src="img/netw/EgPPTLCLSPCompM1.png" width="300px">]
.center[<img src="img/netw/EgPPTLCLSPCompM2.png" width="300px">]
]
]

---
name: S51

# Compensation Networks - Summary


<style type="text/css">
  .tg  {border-collapse:collapse;border-spacing:0;}
  .tg td{font-family:Arial, sans-serif;font-size:14px;padding:9.8px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
  .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:9.8px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:black;}
  .tg .tg-0n7a{background-color:#9aff99;border-color:#ffffff;text-align:center}
  .tg .tg-zv4m{border-color:#ffffff;text-align:center;vertical-align:top}
  .tg .tg-uwdm{background-color:#ffffc7;border-color:#ffffff;text-align:center}
  .tg .tg-lghr{border-color:#ffffff;text-align:center}
  .tg .tg-w8f3{background-color:#c0c0c0;color:#000000;border-color:#ffffff;text-align:center}
  .tg .tg-uzdq{background-color:#ffce93;border-color:#ffffff;text-align:center}
  .tg .tg-lxhs{background-color:#ffce93;border-color:#ffffff;text-align:center}
  .tg .tg-mthk{background-color:#ffffc7;border-color:#ffffff;text-align:center}
  .tg .tg-bk58{background-color:#9aff99;border-color:#ffffff;text-align:center}
  .tg .tg-us2q{background-color:#ffffff;border-color:#ffffff;text-align:center}
  .tg .tg-bqvo{background-color:#ffffff;border-color:#ffffff;text-align:center}
  </style>
  <table class="tg">
    <tr>
      <th class="tg-zv4m"></th>
      <th class="tg-lghr"></th>
      <th class="tg-w8f3">Pick-up Series</th>
      <th class="tg-w8f3">Pick-up Parallel</th>
      <th class="tg-w8f3">Pick-up LCL</th>
    </tr>
    <tr>
      <td class="tg-zv4m"></td>
      <td class="tg-uzdq">`\(Q_{(op)}\)`</td>
      <td class="tg-lxhs">`\( \omega L_{st} \div R_L \)`</td>
      <td class="tg-lxhs">`\( R_L \div \omega L_{st} \)`</td>
      <td class="tg-lxhs">`\( R_L \div \omega L_{st} \)`</td>
    </tr>
    <tr>
      <td class="tg-zv4m"></td>
      <td class="tg-uzdq">`\(P_{o}\)`</td>
      <td class="tg-lxhs">`\( k^2 \mathit{VA_{pt}} Q_{(op)} \)`</td>
      <td class="tg-lxhs">`\( k^2 \mathit{VA_{pt}} Q_{(op)} \)`</td>
      <td class="tg-lxhs">`\( k^2 \mathit{VA_{pt}} Q_{(op)} \)`</td>
    </tr>
    <tr>
      <td class="tg-zv4m"></td>
      <td class="tg-uzdq">`\(Z_{s}\)`</td>
      <td class="tg-lxhs">`\(R_{L}\)`</td>
      <td class="tg-lxhs">`\( \left( j \omega L_{st} + R_L \right) \div \left( 1 + Q_{(op)}^2 \right) \)`</td>
      <td class="tg-lxhs">`\( \omega^2 L_{si}^2 \div R_{L}\)`</td>
    </tr>
    <tr>
      <td class="tg-uwdm" rowspan="3">Primary<br>Series</td>
      <td class="tg-uwdm">`\(Z_{p}\)`</td>
      <td class="tg-mthk">`\( \omega^2 M^2 \div R_{L}\)`</td>
      <td class="tg-mthk">`\( \omega^2 M^2 \left( 1 + Q_{(op)}^2 \right) \div \left( j \omega L_{st} + R_L \right) \)`</td>
      <td class="tg-mthk">`\( \omega^2 M^2 R_{L} \div \omega^2 L_{si}^2 \)`</td>
    </tr>
    <tr>
      <td class="tg-uwdm">`\(I_{pi}\)`</td>
      <td class="tg-mthk">`\( V_{pi} R_{L} \div \omega^2 M^2 \)`</td>
      <td class="tg-mthk">`\( V_{pi} \left( j \omega L_{st} + R_L \right) \div \omega^2 M^2 \left( 1 + Q_{(op)}^2 \right) \)`</td>
      <td class="tg-mthk">`\( V_{pi} \omega^2 L_{si}^2 \div \omega^2 M^2 R_{L}\)`</td>
    </tr>
    <tr>
      <td class="tg-uwdm">`\(I_{pt}\)`</td>
      <td class="tg-mthk">`\( V_{pi} R_{L} \div \omega^2 M^2 \)`</td>
      <td class="tg-mthk">`\( V_{pi} \left( j \omega L_{st} + R_L \right) \div \omega^2 M^2 \left( 1 + Q_{(op)}^2 \right) \)`</td>
      <td class="tg-mthk">`\( V_{pi} \omega^2 L_{si}^2 \div \omega^2 M^2 R_{L}\)`</td>
    </tr>
    <tr>
      <td class="tg-0n7a" rowspan="3">Primary<br>LCL</td>
      <td class="tg-0n7a">`\(Z_{p}\)`</td>
      <td class="tg-bk58">`\( \omega^2 L_{pi}^2 R_L \div \omega^2 M^2 \)`</td>
      <td class="tg-bk58">`\( \omega^2 L_{pi}^2 \left( j \omega L_{st} + R_L \right) \div \omega^2 M^2 \left( 1 + Q_{(op)}^2 \right) \)`</td>
      <td class="tg-bk58">`\( \omega^4 L_{pi}^2 L_{si}^2 \div \omega^2 M^2 R_L \)`</td>
    </tr>
    <tr>
      <td class="tg-0n7a">`\(I_{pi}\)`</td>
      <td class="tg-bk58">`\( V_{pi} \omega^2 M^2 \div \omega^2 L_{pi}^2 R_L \)`</td>
      <td class="tg-bk58">`\( V_{pi} \omega^2 M^2 \left( 1 + Q_{(op)}^2 \right) \div \omega^2 L_{pi}^2 \left( j \omega L_{st} + R_L \right) \)`</td>
      <td class="tg-bk58">`\( V_{pi} \omega^2 M^2 R_L \div \omega^4 L_{pi}^2 L_{si}^2  \)`</td>
    </tr>
    <tr>
      <td class="tg-0n7a">`\(I_{pt}\)`</td>
      <td class="tg-bk58">`\(V_{pi} \div j \omega L_{pi} \)`</td>
      <td class="tg-bk58">`\(V_{pi} \div j \omega L_{pi} \)`</td>
      <td class="tg-bk58">`\(V_{pi} \div j \omega L_{pi} \)`</td>
    </tr>
    <tr>
      <td class="tg-zv4m"><img width=85/></td>
      <td class="tg-us2q"><img width=75/></td>
      <td class="tg-bqvo"><img width=275/></td>
      <td class="tg-bqvo"><img width=275/></td>
      <td class="tg-bqvo"><img width=275/></td>
    </tr>
  </table>

---
name: S52

# Example: Design of a 2kW IPT System

Both the primary and the pick-up coils designed for a 2kW IPT system, when placed `\(100 mm\)` apart measure `\(18.73 \mu H\)`. `\(k\)` between the two coils is measured as 10%. The Q of the primary coil is about 400 while the Q of the pick-up is about 200 (core losses ignored). The primary uses LCL compensation and is energised using a `\(400 V_{rms}\)` sinusoidal voltage source, `\(V_{si}\)`, that has a frequency of `\(85 kHz\)`. The pick-up also uses LCL compensation and deliver `\(2 kW\)` at `\(200 V_{rms}\)` to an AC load. Determine the circuit parameters and using LTSpice validate the design.

.left-column[
- For maximum coil-coil efficiency, show that `\(\mathit{VA_{pt}}=28.28kVA\)` and `\(\mathit{VA_{st}}=14.14kVA\)` 
- Show that `\(L_{pi} = 14.09 \mu H\)`, `\(C_{pt} = 248.9 nF\)` and `\(C_{pi} = 754.8 \mu H\)` 
- Show that `\(L_{si} = 9.96 \mu H\)`, `\(C_{st} = 352.0 nF\)` and `\(C_{si} = 399.8 \mu H\)` 
- With the aid of a simulation model show that 
 - `\(P_{o} \approx 2 kW\)` and `\(\eta \approx 93.2 \% \)` as mathematically predicted
]

.right-column[
.center[<img src="img/netw/EgDes1kW.png" width="350px">]
]

---

class: title-slide
layout: false
count: false
.logo-title[]

# Part V - Primary Converters
### Modelling and Design

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S53

# Voltage Source Converters

.left-column[
- A full-bridge converter is typically used to drive a series/LCL compensated primary coil
- Half-bridge converters may be used in low power applications
- The primary converter can be fed from the grid through a PFC stage or a grid-tied inverter or directly from a DC source
- The frequency of the fundamental component of `\(V_{pi}\)` generated by the converter is at or near the tuned frequency of the compensation network (10's of kHz)
- Thus, traditional PWM schemes cannot be used to regulate the magnitude of `\(V_{pi}\)`
- Typically, voltage cancellation schemes are used, for example using phase-shift modulation to regulate the magnitude of `\(V_{pi}\)`
]

.right-column[
.center[<img src="img/conv/VSIGen.png" width="300px">]
]

---
name: S54

# Phase-Shift Modulation

.center[<img src="img/conv/PShiftGen.png" height="220px">]

- The switches are operated at a frequency `\(f_{s}\)`, where `\(f_{s}\)` is equal to or close to the tunned frequency of the compensation network
- Each leg of the full-bridge operated at 50% duty-cycle, generating the square-waves `\(V_{pa}\)` and `\(V_{pb}\)`
- The phase-shift modulation, `\(\phi_{p}\)`, applied between `\(V_{pa}\)` and `\(V_{pb}\)`, regulates the magnitude of the fundamental component of `\(V_{pi}\)`, since `\(V_{pi}=V_{pa}-V_{pb}\)`
 - When `\(\phi_{p} = \pi\)`, `\(V_{pi}\)` is a maximum

---
name: S55

# Duty-Cycle Modulation

.center[<img src="img/conv/DutyShiftGen.png" height="220px">]

- The switches are operated at a frequency `\(f_{s}\)`, where `\(f_{s}\)` is equal to or close to the tunned frequency of the compensation network
- Each leg of the full-bridge generates the waveforms `\(V_{pa}\)` and `\(V_{pb}\)`, which are `\(180^0\)` out of phase
- The duty-cycle modulation, `\(D_{p}\)`, applied to each leg, regulates the magnitude of the fundamental component of `\(V_{pi}\)`, since `\(V_{pi}=V_{pa}-V_{pb}\)`
 - When `\(D_{p} = 50\%\)`, `\(V_{pi}\)` is a maximum

---
name: S56
 
# Modelling the Converter

.left-column[
- Noting that `\(\phi_{p} \equiv 2 \pi (1-D_p) \textrm{ or } 2 \pi D_p \)`, fourier expansion of `\(V_{pi}\)` is
\\[ V\_{pi} = V\_{in} \frac {4} {\pi} \sum\_{n=1,3,..}^{\infty} \frac {\sin \left(  n \phi\_p/2 \right)} {n} \cos \left(  n \omega\_s t \right)  \quad \text{where} \quad \omega\_s = 2 \pi f\_s \\]
- `\(V_{pi}\)` can be rewritten as a function of its fundamental component
\\[ V\_{pi}^2 = V\_{pi(1)}^2 + \sum\_{n=3,5,..}^{\infty} V\_{pi(n)}^2 \quad \text{where} \quad V\_{pi(1)} = V\_{in} \frac {4} {\pi} \sin \left(  \phi\_p/2 \right) \cos \left( \omega\_s t \right) \\]
- The RMS value of the distortion voltage is therefore
\\[ V\_{pi(dis)\_{rms}} = \sqrt { V\_{pi\_{rms}}^2 - V\_{pi(1)\_{rms}}^2 } = \sum\_{n=3,5,..}^{\infty} V\_{pi(n)}^2 \\]
]

.right-column[
.center[<img src="img/conv/FourierS.png" width="300px">]
]

---
name: S57
 
# THD and Power Factor

.left-column[
- Note that the RMS of `\(V_{pi}\)` can also be given by
\\[ {V\_{pi\_{rms}}} = V\_{in} \sqrt{\phi\_p/pi} \\]
- Total harmonic distortion (THD) of `\(V_{pi}\)` is
\\[ THD\_{V\_{pi}} = V\_{pi(dis)\_{rms}} / V\_{pi(1)\_{rms}} \\]
- THD of `\(V_{pi}\)` is the lowest at about `\(3 \pi /4\)` and is about `\(29\%\)`
- Operating at a `\(\phi_{p}\)` of `\(2 \pi /3\)`, eliminates the 3rd harmonic of `\(V_{pi}\)` 
- Since the compensation networks are tuned to `\(f_{s}\)`, power is mainly transferred at `\(f_{s}\)` 
 - Thus an IPT system can be analysed at `\(f_{s}\)`, taking as `\(V_{pi(1)_{rms}} = V_{in} \sin \left( \phi_p /2 \right) \sqrt{8}/ \pi \)`  

]

.right-column[
.center[<img src="img/conv/THD.png" width="250px">]
]

---
name: S58
 
# Hard Switching (P-I)

.left-column[
- Consider a half-bridge leg and assume that `\(Q_2\)` has been turned-on creating a low-voltage across `\(V_{pa}\)`
- To create a high-voltage, at `\(t = 0s\)`, `\(Q_2\)` starts turning-off and after the dead-time, `\(t_{d}\)`, `\(Q_1\)` starts turning-on  
 - Assume that `\(I_{pi}\)` is positive during this time (out of the leg)
- As `\(Q_2\)` turns-off, `\(I_{pi}\)` shifts to `\(D_2\)`, but the voltage across `\(Q_2\)` as well as `\(V_{pa}\)`, is held low by `\(D_2\)`
- Once `\(Q_2\)` is turned-off, until the end of `\(t_{d}\)`, `\(D_2\)` conducts `\(I_{pi}\)`
- At `\(t_{d}\)`, `\(Q_1\)` starts turning-on and `\(I_{pi}\)` shifts to `\(Q_1\)`
- Then, `\(D_2\)` starts recovering and the voltage across `\(Q_1\)` starts to drop
- At `\(t_{d}+t_{on}\)`, `\(V_{pa}\)` has completed the transition from low-high
- `\(Q_1\)` was subjected to high-stresses leading to high turn-on losses
- Capacitive loading and/or modulation lead to hard-switching 

]

.right-column[
.center[<img src="img/conv/HardSwitchW.png" width="320px">]
]

---
name: S59
 
# Hard Switching (P-II)

.center[<img src="img/conv/HardSwitchState.png" width="750px">]

---
name: S60
 
# Soft Switching (P-I)

.left-column[
- Consider a half-bridge leg and assume that `\(Q_2\)` has been turned-on creating a low-voltage across `\(V_{pa}\)`
- To create a high-voltage, at `\(t = 0s\)`, `\(Q_2\)` starts turning-off and after the dead-time, `\(t_{d}\)`, `\(Q_1\)` starts turning-on  
 - Assume that `\(I_{pi}\)` is negative during this time (in to the leg)
- As `\(Q_2\)` turns-off, `\(I_{pi}\)` shifts to `\(C_2\)` and `\(C_1\)` causing `\(V_{pa}\)` to increase 
- Once `\(Q_2\)` is turned-off and `\(V_{pa}\)` has completed the transition from low-high, until the end of `\(t_{d}\)`, `\(D_1\)` conducts `\(I_{pi}\)`
- At `\(t_{d}\)`, `\(Q_1\)` starts turning-on while voltage across it is low and `\(I_{pi}\)` shifts from `\(D_1\)` to `\(Q_1\)`
- Both `\(Q_1\)` and `\(Q_2\)` had very low-stresses leading to significantly lower switching losses
- Inductive loading and/or improved topologies help soft-switching 
]

.right-column[
.center[<img src="img/conv/SoftSwitchW.png" width="320px">]
]

---
name: S61
 
# Soft Switching (P-II)

.center[<img src="img/conv/SoftSwitchState.png" width="750px">]

---
name: S62

# Example: Hard Switching vs Soft Switching

A full-bridge converter that employs C2M0025120D devices is used as the primary converter of a `\(10kW\)` IPT system. The full-bridge feeds off a `\(800V\)` DC bus and produces a `\(85kHz\)` duty-cycle modulated `\(V_{pi}\)` to drive the primary coil through a compensation network. `\(I_{pi}\)` can be model using a `\(14A_{rms}\)`, `\(85kHz\)` ideal current source. Assume that `\(I_{pi}\)` lags `\(V_{pi}\)` by `\(10^0\)`.

.left-column[
- Develop a simulation model of the full-bridge converter that is driving `\(I_{pi}\)`
- Observe the switching waveforms and confirm all switches are soft-switching
- Determine the total losses in the full-bridge converter
- Set `\(D\)` to 0.7 and observe increase in converter losses 
- Setup `\(I_{pi}\)`, such that it leads `\(V_{pi}\)` by `\(10^0\)`, and confirm all switches are hard-switching
]

.right-column[
.zoom175[
.center[<img src="img/conv/EGSoftHardSw.png" width="300px">]
]
]

---
name: S63
 
# Series Blocking Capacitor

.center[<img src="img/conv/SeriesBlock.png" height="180px">]

- Under practical operation, `\(V_{pi}\)` may have a non-zero average 
- When driving an LCL compensated coil, the non-zero average of `\(V_{pi}\)` will lead to circulating DC current
- This can be avoided by having a DC-blocking capacitor, `\(C_{pi}\)`, that is connected in series with `\(L_{pi}\)`
 - If the primary coil is partially series compensated, a DC-blocking capacitor is not required
- `\(C_{pi}\)` together with `\(L_{pi}\)` forms an equivalent inductance given by

\\[ L\_{pi\_{(eq)}} = L\_{pi} - \frac {1} {\omega^2 C\_{pi}} \\]

---
name: S64

# Example: Full-Bridge Driven LCL Primary

Both the primary and the pick-up coils designed for an IPT system, when placed `\(100 mm\)` apart measure `\(18.73 \mu H\)` each. `\(k\)` between the two coils is measured as 20%. The Q of the primary coil as well as the pick-up coil is about 400 (core losses ignored). The primary and pick-up uses LCL compensation. The pick-up powers a `\(50 \Omega \)` AC load while the full-bridge converter feeds of a `\(800 V_{dc}\)` bus. The converter employs C2M0025120D devices and produces a duty-cycle modulated `\(V_{pi}\)`, at `\(85kHz\)`.

.left-column[
- If `\(C_{pi}=187.2nF\)`, show that `\(L_{pi}=37.46 \mu F\)`
- Develop a simulation model of the system 
 - Observe the waveforms and efficiency when `\(D_{p}=0.5\)`
- Due to misalignment, `\(k\)` has increased to 30% and therefore to maintain the same `\(P_o\)`, the primary controller sets `\(D_{p}\)` to 0.75
 - Observe the waveforms, efficiency and switch losses
 - Comment on the thermal design requirements 
]

.right-column[
.zoom175[
.center[<img src="img/conv/EGFullBridgeLCL.png" width="350px">]
]
]

---
name: S65

# Current Source Converters

.center[<img src="img/conv/CSIGen.png" height="180px">]

- Current source push-pull converters are widely used in low power IPT applications
 - Drives a parallel compensated primary coil at resonance in autonomous operating mode or near resonance in fixed-frequency operating mode
- Not widely used in high-power applications 
 - Require a large DC inductor
 - Sensitive to changes in operating conditions
- Current source full-bridge converters may be used in higher power applications

---
name: S66
 
# Push-Pull Parallel-Resonant Converter

.left-column[
- The switches are operated at a frequency `\(f_{s}\)`, where `\(f_{s}\)` is equal to or less than the resonant frequency of the system given by
\\[ f\_{r} = \frac {1} {2 \pi \sqrt {L\_{pt} C\_{pt}}} \geqslant f\_{s} \\]
- Switches operated complementary to each other at 50% duty-cycle
- `\(L_{dc}\)` togther with the split-winding transformer create two `\(0.5I_{dc}\)` current sources 
- When operating Q is sufficiently high, `\(V_{pa}\)` and `\(V_{pb}\)` take the shape of a half-sinusoidal wave
- By equating the volt-second product at each end of `\(L_{dc}\)`
\\[ V\_{pt\_{rms}} \approx \pi V\_{in}/ \sqrt{2} \quad \text{and} \quad I\_{pt\_{rms}} \approx \pi V\_{in}/ \sqrt{2} \omega\_r L\_{pt} \\]
]

.right-column[
.center[<img src="img/conv/PPRCW.png" width="300px">]
]

---
name: S67

# Example: PPRC Driven Primary

A push-pull parallel resonant converter (PPRC) is used to drive the primary coil of an IPT system. The PPRC feeds of a `\(200 V_{dc}\)` bus and is operated at `\(85kHz\)`. The converter employs C2M0025120D devices. Both the primary and the pick-up coils designed for this IPT system, when placed `\(100 mm\)` apart measure `\(18.73 \mu H\)` each. The reflected load on to the primary coil, `\(Z_{pr}\)`, is expected to be `\(1 \Omega \)`.

.left-column[
- Assuming `\(C_{pt}=180nF\)`, develop a simulation model of the system 
 - Observe the waveforms and efficiency 
- Increase `\(Z_{pr}\)` to `\(4 \Omega \)` and show that the switches will short `\(C_{pt}\)` before the voltage across it reaches `\(0V\)`
]

.right-column[
.zoom175[
.center[<img src="img/conv/EGPPRC.png" width="320px">]
]
]

---

class: title-slide
layout: false
count: false
.logo-title[]

# Part VI - Pick-up Converters
### Modelling and Design

---

layout: true
name: template_slide

.logo-slide[]
.footer[[Duleepa J Thrimawithana](https://www.linkedin.com/in/duleepajt), Department of Electrical, Computer and Software Engineering (2019)]

---
name: S68

# Pick-up Converters

.center[<img src="img/pkup/PickupGen.png" height="110px">]

<div style="height:1px;font-size:1px;">&nbsp;</div>
- In most applications a rectifier is used to derive a DC output
- In some applications, current doubler rectifiers are used to increase the power transfer capability of a parallel compensated pick-up 
- Following the rectifier, a DC-DC converter is often used to regulate the output 
- Alternatively, an active rectifier may be used for rectification and regulation while also providing additional functionalities such as bi-directional power flow or improved misalignment tolerance
 - However, the active rectifier needs to be synchronised with the primary converter 
- Direct AC-AC processing pick-up converters may be used if an AC output is required

---
name: S69

# Rectification of a Series Compensated Pick-up

.left-column[
- A diode rectifier and a filter capacitor used to derive a DC output 
- The resulting `\(V_{si}\)` across the resonant tank is a square wave 
\\[ V\_{si} = V\_{out} \frac {4} {\pi} \sum\_{n=1,3,..}^{\infty} \frac {1} {n} \cos \left(  n \omega\_s t \right)  \quad \text{where} \quad \omega\_s = 2 \pi f\_s \\]
- Assuming `\(\omega L_{st} = 1 / \omega C_{st}\)` and `\(I_{si}\)` is sinusoidal,
\\[ P\_{o} = V\_{out} I\_{out} = V\_{sr\_{rms}} I\_{si\_{rms}} = \frac {2 \sqrt{2}} {\pi} V\_{out} I\_{si\_{rms}}  \\]
- Thus, `\(V_{out}\)`, `\(I_{out}\)` and `\(R_{L(dc)}\)` are related to `\(V_{sr}\)`, `\(I_{si}\)` and `\(R_{L(ac)}\)` as
\\[ V\_{out} = \frac {\pi} {2 \sqrt{2}}  V\_{sr\_{rms}}, \quad  I\_{out} = \frac {2 \sqrt{2}} {\pi} I\_{si\_{rms}} \quad \text{&} \quad R\_{L(dc)} = \frac {\pi^2} {8}  R\_{L(ac)} \\]
]

.right-column[
.center[<img src="img/pkup/PickupSW.png" width="250px">]
]

---
name: S70

# Rectification of a Parallel Compensated Pick-up

.left-column[
- A diode rectifier, a DC inductor and a filter capacitor used 
- The resulting `\(I_{si}\)` into the rectifier is a square wave 
\\[ I\_{si} = I\_{out} \frac {4} {\pi} \sum\_{n=1,3,..}^{\infty} \frac {1} {n} \cos \left(  n \omega\_s t \right)  \quad \text{where} \quad \omega\_s = 2 \pi f\_s \\]
- Assuming `\(\omega L_{st} = 1 / \omega C_{st}\)` and `\(V_{si}\)` is sinusoidal,
\\[ P\_{o} = V\_{out} I\_{out} = V\_{si\_{rms}} I\_{sc\_{rms}} = \frac {2 \sqrt{2}} {\pi} I\_{out} V\_{si\_{rms}}  \\]
- Thus, `\(V_{out}\)`, `\(I_{out}\)` and `\(R_{L(dc)}\)` are related to `\(V_{sr}\)`, `\(I_{si}\)` and `\(R_{L(ac)}\)` as
\\[ V\_{out} = \frac {2 \sqrt{2}} {\pi} V\_{si\_{rms}}, \quad  I\_{out} = \frac {\pi} {2 \sqrt{2}} I\_{sc\_{rms}} \quad \text{&} \quad R\_{L(dc)} = \frac {8} {\pi^2}  R\_{L(ac)} \\]
]

.right-column[
.center[<img src="img/pkup/PickupPW.png" width="250px">]
]

---
name: S71

# Rectification of an LCL Compensated Pick-up

.left-column[
- A diode rectifier and a filter capacitor used to derive a DC output 
- The resulting `\(V_{si}\)` across the resonant tank is a square wave 
\\[ V\_{si} = V\_{out} \frac {4} {\pi} \sum\_{n=1,3,..}^{\infty} \frac {1} {n} \cos \left(  n \omega\_s t \right)  \quad \text{where} \quad \omega\_s = 2 \pi f\_s \\]
- Assuming `\(\omega L_{st} = 1 / \omega C_{st}\)` and `\(I_{si}\)` is sinusoidal,
\\[ P\_{o} = V\_{out} I\_{out} = \frac {2 \sqrt{2}} {\pi} V\_{out} I\_{sc\_{rms}}  \\]
- Thus, `\(I_{out}\)` and `\(R_{L(dc)}\)` are related to `\(I_{si}\)` and `\(R_{L(ac)}\)` as
\\[ \quad  I\_{out} = \frac {2 \sqrt{2}} {\pi} I\_{sc\_{rms}} \quad \text{&} \quad R\_{L(dc)} = \frac {\pi^2} {8}  R\_{L(ac)} \\]
]

.right-column[
.center[<img src="img/pkup/PickupLCLW.png" width="250px">]
]

---
name: S72

# Example: Rectification 

When `\(100 mm\)` apart, the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(10 A_{rms}\)` current. The pick-up uses LCL compensation and a full-bridge recrtifier to power a `\(50 \Omega \)` DC load. Analyse the behaviour and compare to a series compensated pick-up powering a `\(2 \Omega \)` DC load as well as a parallel compensated pick-up powering a `\(50 \Omega \)` DC load.

.left-column[
- With the aid of LTSpice simulation models show that 
 - `\(I_{si}\)` of the LCL compensated pick-up is discontinuous and therefore `\(R_{L(dc)} \neq \pi^2 R_{L(ac)}/8   \)`
 - `\(I_{si}\)` of the LCL compensated pick-up can be made continuous by increasing `\(L_{si}\)` and series compensating to create an `\(L_{si_{(eq)}}\)`
 - A parallel compensated pick-up can deliver about 50% more power to the same DC load 
]

.right-column[
.zoom175[
.center[<img src="img/pkup/EgRac.png" width="290px">]
]
]

---
name: S73

# Current Doubler Rectifiers

.center[<img src="img/pkup/CrntDblr.png" height="200px">]

<div style="height:1px;font-size:1px;">&nbsp;</div>
- A full-wave or a half-wave current doubler rectifier can be used to improve the power transfer 
- Assuming `\(\omega L_{st} = 1 / \omega C_{st}\)` and `\(V_{si}\)` is sinusoidal, 
\\[ I\_{out} = \frac {\pi} { \sqrt{2}} I\_{sc}, \quad V\_{out} = \frac { \sqrt{2}} {\pi} V\_{si} \quad \text{&} \quad R\_{L(dc)} = \frac {2} {\pi^2}  R\_{L(ac)}\\]

---
name: S74

# Short-Circuit Regulator

.center[<img src="img/pkup/ShortCctReg.png" height="200px">]

- Following the rectifier, a short-circuit (boost) regulator, can be used to regulate the output of a parallel compensated IPT pick-up
- The duty-cycle, `\(D_{scr}\)`, of `\(Q_{1}\)` is controlled to regulate `\(I_{out}\)`, and therefore `\(V_{out}\)`
- `\(Q_{1}\)` can be operated either at a 'low' switching frequency using a hysteritic controller or at a 'high' switching frequency using for example a PI controller
- `\(L_{dc}\)` should be sufficiently large to maintain `\(I_{Ldc}\)` continuous

---
name: S75

# Power Regulation with Short-Circuit Control

.left-column[
- `\(I_{out}\)` is the average of `\(I_{D1}\)` as given by
\\[ I\_{out} = \frac {\pi} {2 \sqrt{2}} (1-D\_{scr})  I\_{sc} \quad \text{since} \quad I\_{Ldc} = \frac {\pi} {2 \sqrt{2}} I\_{sc} \\]
- If `\(V_{out}\)` is regulated by operating `\(Q_{1}\)` at `\( 0 < D_{scr} < 1 \)`, then
\\[ P\_{out\_{(reg)}} = \frac {\pi} {2 \sqrt{2}} (1-D\_{scr})  I\_{sc} V\_{out\_{(reg)}} = (1-D\_{scr}) P\_{out\_{(max)}} \\]
- If `\(R_{L}\)` is below a critical value,  `\(V_{out}\)` is unregulated since `\( D_{scr} = 0 \)`
\\[ V\_{out\_{(unreg)}} = \frac {\pi} {2 \sqrt{2}} I\_{sc} R\_{L(dc)} \quad \text{&} \quad P\_{out\_{(unreg)}} = \frac {\pi^2} {8} I\_{sc}^2 R\_{L(dc)}  \\]
- `\(P_{out}\)` is a maximum at `\(R_{L(dc)_{(critical)}}=V_{out_{(reg)}} 2 \sqrt{2} \;/ (\pi I_{sc}) \)`
]

.right-column[
.center[<img src="img/pkup/ShortCctRegW.png" width="270px">]
]

---
name: S76

# `\(f_{scr}\)` & `\(\Delta V_{out}\)` with Short-Circuit Control

- The switching frequency, `\(f_{scr}\)`, of `\(Q_{1}\)` is a function of the output voltage ripple, `\(\Delta V_{out}\)` 
\\[ f\_{scr} = \frac {\pi} {2 \sqrt{2}} \frac {I\_{sc}} {C\_{dc} \; \mathit{\Delta V\_{out}} } (1-D\_{scr}) D\_{scr} \quad \text {where} \quad f\_{scr} = \frac {1} {T\_{scr}} \\]
- If `\(\Delta V_{out}\)` is fixed by the design, for example when using a hysteritic controller, then,
\\[ f\_{scr\_{max}} = \frac {\pi} {8 \sqrt{2}} \frac {I\_{sc}} {C\_{dc} \; \mathit{\Delta V\_{out}} } \quad \text {when} \quad D\_{scr} = 0.5 \\]
- When using 'slow' switching, `\(C_{dc}\)` should be chosen to ensure an acceptable `\(f_{scr_{max}}\)`
\\[ C\_{dc} \geqslant \frac {\pi} {8 \sqrt{2}} \frac {I\_{sc}} {f\_{scr\_{max}} \; \mathit{\Delta V\_{out}} } \\]
- When using 'fast' switching, `\(C_{dc}\)` should be chosen to ensure an acceptable `\(\Delta V_{out}\)` at the operating `\(f_{scr}\)`

---
name: S77

# Slow Switching vs Fast Switching

.left-column[
- If `\(Q_{1}\)` is operated at a frequency significantly smaller than `\(f_{s}\)`
 - When `\(Q_{1}\)` is turned-on, `\(V_{si}\)` collapases and the resonant energy is lost
 - When `\(Q_{1}\)` is turned-off, `\(V_{si}\)` builds up and the pick-up operates at maximum [`\(Q_{sp_{op}}\)`](#S38)
 - `\(f_{scr}\)` must be relatively low to keep losses to a minimum and not to excite any secondary resonance
- If `\(Q_{1}\)` is operated at a significantly higher frequency
 - `\(V_{si}\)` is continuous and is a function of `\(D_{scr}\)`
 - [`\(Q_{sp_{op}}\)`](#S38) of the pick-up is a function of the load and is only a maximum at `\(R_{L(dc)_{(critical)}}\)`
 - Switching losses can be significant 
]

.right-column[
.center[<img src="img/pkup/SlowFastW.png" width="300px">]
]

---
name: S78

# Example: A Short Circuit Regulator  

When `\(100 mm\)` apart, the primary and pick-up coils of an IPT system each measures `\(18.73 \mu H\)`. `\(k\)` is measured as 10%. `\(L_{pt}\)` is driven to maintain a constant `\(85 kHz\)`, `\(50 A_{rms}\)` current. The pick-up uses parallel compensation and a short-circuit regulator to supply `\(500 V \)` to a variable DC load, where `\( 50 \Omega < R_{L(dc)} < 500 \Omega \)`. 

.left-column[
- Develop a LTSpice simulation model 
- Show that 
 - `\(R_{L(dc)_{(critical)}}\)` is `\( 91 \Omega \)` and at this load `\(V_{out}\)` just reach `\(500 V \)` 
 - When `\(R_{L(dc)} = 50 \Omega\)`, `\(V_{out}\)` can not be regulated and drop to `\(\sim 278 V \)`
 - When `\(R_{L(dc)} = 182 \Omega\)`, to regulate `\(V_{out}\)` to `\(500 V \)`, `\(D_{scr} \approx 0.5\)`
 - Explore the differences between slow and fast switching 
]

.right-column[
.zoom175[
.center[<img src="img/pkup/EgSctControl.png" width="300px">]
]
]

---
name: S79

# Active Rectifiers

.center[<img src="img/pkup/ActiveRect.png" height="140px">]

- A typical active rectifier employs a full-bridge converter that is controlled to generate a `\(V_{si}\)` that leads or lags `\(V_{pi}\)` by a phase-angle `\(\theta\)`
- `\(\theta\)` can be controlled together with the amplitude of `\(V_{si}\)` to generate a specific AC impedance, `\(Z_{L(ac)}\)`, across `\(V_{si}\)`
- The reactive part of `\(Z_{L(ac)}\)` can be used to improve power transfer and/or reduce losses, especially when operated under misaligned conditions
- In applications requiring only uni-directional power flow, two of the switches in the full-bridge can be replaced with diodes 

---
name: S80

# Demo: Simulating an IPT System on PLECS

.center[<img src="img/pkup/DemoPlecs.png" height="400px">]

---

class: title-slide
layout: false
count: false
.logo-title[]

# Acknowledgements
#### Special thanks to Grant Covic, Gaurav Kalra, Cody Liu, Victor Wang, Lei Zhao and Vahid Zahiri 
#### for their valueable feedback.

---

class: title-slide
layout: false
count: false
.logo-title[]

# Questions?
### Thank you


    </textarea>

    <!-- 
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    -->    
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript">
    </script>


    <script src="remark.min.js" type="text/javascript">
    </script>

    <script type="text/javascript">

      var options = {};

      var renderMath = function() {
        renderMathInElement(document.body);
        // or if you want to use $...$ for math,
        renderMathInElement(document.body, {delimiters: [ // mind the order of delimiters(!?)
        {left: "$$", right: "$$", display: true},
        {left: "$", right: "$", display: false},
        {left: "\\[", right: "\\]", display: true},
        {left: "\\(", right: "\\)", display: false},
        ]});
      }

      var slideshow = remark.create({
        ratio: '16:9',
        slideNumberFormat: '%current%',
        countIncrementalSlides: false,
        renderMath,
      });

      MathJax.Hub.Config({
          tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          processEscapes: true
          }
      });

      MathJax.Hub.Queue(function() {
          $(MathJax.Hub.getAllJax()).map(function(index, elem) {
              return(elem.SourceElement());
          }).parent().addClass('has-jax');
      });

      MathJax.Hub.Configured();
      
    </script>
  </body>
</html>